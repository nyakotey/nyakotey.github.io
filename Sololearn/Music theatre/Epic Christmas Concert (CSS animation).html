<!-- 
    PLEASE WATCH TILL THE END (~1 minute)
    
    DO YOU BELIEVE IN CSS? 

    My first 1K+ lines of code :) 
  
    Only the curtains are images, all else is plain CSS
    Vanilla JS for timing

    Created: 26th November 2020
    99% completed: 29th November 2020
    Published on SL: 23rd December 2020 
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Nyakotey">
    <meta name="description" content="Epic Christmas code, my best by far and favorite code for 2020!">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat" rel="stylesheet">
    <link rel="stylesheet" href="christmas.css">
    <title>Epic Christmas Show 2020</title>
</head>

<body>
    <!-- code flow
    {curtains lights stage} theatre
    {singer pianist} performers -->
    <main class="theatre">
        <div class="curtain"></div>
        <div class="lights">
            <span class="l1"></span><!--
            --><span class="l2"></span><!--
            --><span class="l3"></span>
        </div>
        <div class="performers">
            <section class="artist">
                <div class="mic">
                    <div class="mic-head"></div>
                    <div class="mic-stem"></div>
                    <div class="mic-base"></div>
                </div>
                <div class="singer">
                    <div class="santa-hat">
                        <div class="ball"></div>
                        <div class="hat"></div>
                        <div class="fluff"></div>
                    </div>
                    <div class="chat-popup">
                        <div class="chat-bubble cb-left">Thanks for Listening :)</div>
                    </div>
                    <div class="head">
                        <div class="hair"></div>
                        <div class="tete">
                            <div class="face">
                                <div class="eye">
                                    <div class="brow left-brow"></div>
                                    <div class="brow right-brow"></div>
                                    <div class="eyeball left-ball"></div>
                                    <div class="eyeball right-ball"></div>
                                </div>
                                <div class="nose"></div>
                                <div class="mouth"></div>
                                <div class="ear left-ear"></div>
                                <div class="ear right-ear"></div>
                            </div>
                        </div>
                        <div class="neck"></div>
                    </div>
                    <div class="upper-body">
                        <div class="stripe left-stripe"></div>
                        <div class="stripe right-stripe"></div>
                        <div class="chest"></div>
                        <div class="blouse">
                            <div class="bb bb-left"></div>
                            <div class="bb bb-right"></div>
                        </div>  
                        <div class="arm right-arm">
                            <div class="upper-arm"></div>
                            <div class="forearm">
                                <div class="hand">
                                    <div class="fingers">
                                        <span class="f1"></span>
                                        <span class="f2"></span>
                                        <span class="f3"></span>
                                        <span class="f4"></span>
                                        <span class="f5"></span>
                                    </div>
                                    <div class="palm"></div>
                                </div>
                            </div>
                        </div>
                        <div class="arm left-arm">
                            <div class="upper-arm"></div>
                            <div class="forearm"></div>
                        </div>
                    </div>
                    <div class="lower-body">
                        <div class="skirt"> </div>
                    </div>
                </div>
            </section>
            <section class="instrumentalist">
                <div class="pianist">
                    <div class="player">
                    <div class="santa-hat">
                        <div class="ball"></div>
                        <div class="hat"></div>
                        <div class="fluff"></div>
                    </div>
                        <div class="head">
                            <div class="tete">
                                <div class="hair"></div>
                                <div class="face">
                                    <div class="eye">
                                        <div class="brow"></div>
                                        <div class="ball"></div>
                                    </div>
                                    <div class="nose"></div>
                                    <div class="mouth"></div>
                                    <div class="ear"></div>
                                </div>
                                <div class="neck"></div>
                            </div>
                        </div>
                        <div class="upper-body">
                            <div class="shirt">
                                <div class="arms">
                                    <div class="right-arm">
                                        <div class="upper-arm"></div>
                                        <div class="forearm"></div>
                                    </div>
                                    <div class="left-arm">
                                        <div class="forearm"></div>
                                    </div>
                                </div>
                            </div>                    
                        </div>
                        <div class="lower-body">
                            <div class="legs right-leg">
                                <div class="thigh"></div>
                                <div class="crus"></div>
                                <div class="shoe"></div>
                            </div>
                            <div class="legs left-leg">
                                <div class="thigh"></div>
                                <div class="crus"></div>
                                <div class="shoe"></div>
                            </div>
                        </div>
                    </div>
        
                    <div class="stool">
                        <div class="seat"></div>
                        <div class="stool-legs">
                            <span class="l1"></span>
                            <span class="l2"></span>
                        </div>
                    </div>
        
                    <div class="piano">
                        <div class="cab"></div>
                        <div class="fallboard"></div>
                        <div class="keybed"></div>
                        <div class="pedal">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="support">
                            <div class="column"></div>
                            <div class="beam"></div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        <div class="stage"></div>
        <button class="btn-hat-toggle">Chrismasify</button>
    </main>

    <section class="wishes">
        <div class="greetings"><p>Merry Christmas<br>And Happy New Year<br>üíñ Nyakotey</p></div>
        <div class="link"><a href="https://www.sololearn.com/Profile/6001817/?ref=app">Follow Me :)</a></div>
    </section>

    <aside>
        <div class="loader">
            <div class="ball"></div>
            <div class="hat"></div>
            <div class="fluff"></div>
        </div>
        <footer>Made with üíù</footer>
    </aside>

 <!--   <audio src="https://www.dropbox.com/s/lvk6jjart290ig6/christmas-song.mp3?dl=1" type="audio/mp3">This was supposed to be the song for the animation  </audio> -->
  <!--  <audio src="https://drive.google.com/uc?id=1XzsQbiC11ej89ChFFPIOABMTzHANT8-I" type="audio/mp3">This was supposed to be the song for the animation  </audio> -->
    <audio src="https://nyakotey.github.io/resources/christmas-song.mp3" type="audio/mp3">This was supposed to be the song for the animation  </audio>
    <audio src="https://nyakotey.github.io/resources/audience.mp3" type="audio/mp3">And this was meant to be the audience reaction </audio>
    <!-- "D:\THE FOLDER\MOMUSIC\song\piano_voice_1.mp3" -->
    <script>
            // variables
        const audioMusicians = document.getElementsByTagName("audio")[0];
        const audioAudience = document.getElementsByTagName("audio")[1];
        const aside = document.getElementsByTagName("aside")[0];
        const theatre = document.getElementsByClassName("theatre")[0];
        const wishes = document.getElementsByClassName("wishes")[0];
        const mic = document.getElementsByClassName("mic")[0];
        const alert = document.getElementsByClassName("chat-popup")[0];
        const mouth = document.getElementsByClassName("mouth")[0];
        const gesture = document.querySelector(".singer .right-arm .forearm");
        const playerhandl = document.querySelector(".player .left-arm .forearm");
        const playerhandr = document.querySelector(".player .forearm");
        const playerfeet = document.querySelector(".player .legs");
        const pedal = document.getElementsByClassName("pedal")[0];
        const hatToggle = document.getElementsByClassName("santa-hat");
        const body = document.body;
        //functions
        const $ = selector => document.querySelector(selector);
        const play = () => {
            aside.style.display = "none";
            theatre.style.opacity = "1";
            theatre.children[0].style.animation = "lift 6s ease-out 4s forwards";
            body.style.animation = "bg-color 5s ease infinite alternate";
            audioAudience.play();
            setTimeout(() => { audioMusicians.play(); }, 2000);
            setTimeout(() => {
                theatre.lastElementChild.style.opacity = "1";
                theatre.lastElementChild.addEventListener("click", () => {
                    theatre.lastElementChild.style.animation = "none";
                    if (hatToggle[0].style.display == "block" && hatToggle[1].style.display == "block") {
                        hatToggle[0].style.display = "none";
                        hatToggle[1].style.display = "none";
                        $(".lights .l2").style.animation = `lights-on 2s ease-in 2s forwards`;
                        $(".lights .l1").style.animation = `lights-on 2s ease-in 2s forwards,
                            light-rot1 10s ease 5s infinite`;
                        $(".lights .l3").style.animation = `lights-on 2s ease-in 2s forwards,
                            light-rot2 10s ease 5s infinite`;
                    }
                    else {
                        hatToggle[0].style.display = "block";
                        hatToggle[1].style.display = "block";
                        $(".lights .l2").style.animation = `lights-on 2s ease-in 2s forwards, 
                            christmasify-flash 2s infinite`;
                        $(".lights .l1").style.animation = `lights-on 2s ease-in 2s forwards,
                            light-rot1 10s ease 5s infinite,
                            christmasify-flash 2s .7s infinite`;
                        $(".lights .l3").style.animation = `lights-on 2s ease-in 2s forwards,
                            light-rot2 10s ease 5s infinite,
                            christmasify-flash 2s 1.4s infinite`;
                    }
                });
            }, 10000);
            // console.log("ACTION");
        };
        const start = () => {
            aside.innerHTML += `<div class="santa"><button>Ho Ho Ho!</button></div>`;
            setTimeout(()=>{document.querySelector(".santa button").innerHTML = "Start The Show!";}, 1000);
            aside.lastChild.addEventListener("click", play);
            audioAudience.removeEventListener("canplaythrough", start);
            // console.log("we can start now");
        };
        const greet = () => {
            theatre.style.position = "relative";
            theatre.children[0].style.animation = "drop 5s ease-out forwards";
            setTimeout(() => { wishes.style.display = "flex"; }, 5000);
        };
        const end = () => {
            audioAudience.play();
            theatre.lastElementChild.style.display = "none";
            mic.style.opacity = "0";
            alert.style.display = "block";
            mouth.style.animation = "none";
            gesture.style.animation = "gesture 4s ease forwards";
            playerhandl.style.animation = "none";
            playerhandr.style.animation = "none";
            playerfeet.style.animation = "none";
            pedal.children[2].style.animation = "none";
            setTimeout(greet, 5000);
            // console.log("ended successfully");
        };

        const showtime = () => {
            audioAudience.addEventListener("canplaythrough", start);
            audioMusicians.addEventListener("ended", end);
            // console.log("audio ready");
        };
        //showtime
        audioMusicians.addEventListener("canplaythrough", showtime);
    </script>
</body>
</html>